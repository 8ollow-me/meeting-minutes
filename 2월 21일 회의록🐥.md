# 2월 21일 회의록🐥
작성: `이주찬`

### 프로젝트 진행 단계
- [x] 주제설정
- [x] 데이터 수집 및 검증
- [ ] 데이터 전처리
- [ ] 데이터 모델링 및 평가
- [ ] 상품화
- [ ] 발표자료 작성
- [ ] 프로젝트 발표 및 평가

***

### ResNet 학습
1. **초기 계획**
	- 정확도(Accuracy) 90% 이상
    - 최적의 학습 설정 탐색
        1. optuna 사용하여 최적의 optimizer(Adam, AdamW, Momentum, RMSProp), batch_size(16 ~ 64), learning_rate 탐색
        2. 최적의 Num_epoch(5, 10, 15, 25, 30) 탐색
            - 5명이서 epoch 수를 다 다르게 해서 학습 진행
    - 데이터셋 이미지 수 추가
        - 이미지 수 추가해도 모델 성능 낮으면 데이터 증강(augmentation) 시도
    - 강아지 이미지에서 bbox를 추출하여 크롭 이미지를 출력하도록, 강아지 이미지 데이터셋으로 YOLO 모델 학습
    - 서버 구축 위해 다같이 Flask 공부
2. **학습 진행**
    - 구글 코랩 사용하여 진행
        - 무료 버전 사용 시 사용 시간 제한 있으므로, 다같이 대부분의 코드는 동일하게 하고 특정 조건만 다르게 해서 진행
        1. 런타임 유형 cpu에서 t4-gpu로 변경
        2. 드라이브 마운트 사용하여 코랩과 구글 드라이브 연결 -> 코랩에 데이터셋 올리기
        3. 학습 코드 돌리기
    - ResNet 18, 50, 101 중 최적의 모델 탐색 
        - 합성곱층 개수가 적은 것부터 순차적으로 진행하여, 적은 것에서 목표치 달성하면 많은 것은 굳이 학습시키지 않기
3. **학습 피드백**
    - 최진명 대리님 피드백
        1. 서버 구축 시 굳이 Flask 사용하지 않고, 클라이언트와 마찬가지로 Streamlit 사용하는 것 추천
        2. 정확도 올리기 위해 데이터셋 라벨마다 양질의 데이터 더 추가하는 것 추천
        3. 데이터 불균형의 기준은 어느 정도인가? -> 라벨마다 데이터 개수가 10프로 정도 차이 날 때부터 불균형이라고 봄 
        4. 혼동 행렬을 통해, 어떤 라벨에서 유독 혼동이 생기는지 알 수 있음
        5. 모델 학습의 테스트용으로는 Num_epoch을 5, 10 정도로만 해도 됨
    - 학습 시간이 너무 오래 걸려, weight_decay 코드 삭제, optimizer는 optuna로 탐색치 않고 한 명 당 한 종류씩 담당하여 학습 진행
    - 데이터셋 라벨 종류 조정
        1. HEADING 삭제
        2. STANDING과 WALKRUN을 WALK로 합침
    - num_epoch은 10으로 고정
    - YOLO 모델이 이미 코코라는 데이터셋으로 강아지 개체 감지 학습이 되어 있기 때문에, 따로 학습시키지 않기로 함

***

### 데이터 모델링
1. **이미지 캡쳐 함수 생성** (주찬, 현비 담당)
    - 웹캠에서 사진을 1초에 10장씩 프레임별로 캡쳐해, yolo에 넣을 형식(jpg or png 파일, 608*608 크기)대로 처리하는 함수 생성
        - jpg 파일 형식이 용량에서 이점이 있어 선택됨
2. **YOLO 모델을 통한 개체 감지** (주형, 하은, 태균 담당)
    1. 이미지 캡쳐 함수를 통해 저장한 이미지를 YOLO에 넣어, bbox 정보와 class 정보 출력
    2. class는 강아지 빼고 다 삭제, 캡쳐 이미지의 강아지 객체에 bbox 그리기
3. **이미지 크롭 및 ResNet 모델을 통한 분류** (태균, 지수 담당) 
    - bbox 정보 토대로 캡쳐 이미지를 크롭, 크롭 이미지를 ResNet에 넣어 분류
4. **인터페이스 보강** (현령 담당) 
    - 1 ~ 3에서 나온 출력 데이터 중 bbox 정보, bbox 그린 캡쳐 이미지, 강아지 행동 분류 결과 이 세 가지를 인터페이스에서 표현하는 방식 고안
